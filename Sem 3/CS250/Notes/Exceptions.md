Opened 01:48

Status: 

Tags: cs250

Topic: 0

Prev Topic: [[ðŸŸ¡ 6 Program Translation and Execution]] Next Topic:

---

# Exceptions
> **Exception:** An unscheduled event that disrupts the normal execution of a program. Exceptions transfer control to the operating system (or a runtime handler) so the event can be handled safely.

Exceptions are a fundamental mechanism for:

- Error detection (e.g., overflow, invalid memory access)
- Interaction with I/O devices
- Supporting multitasking and operating systems
    

> **Interrupt:** A type of exception that originates _outside_ the processor core (e.g., I/O devices, timers).  
> _Note:_ Some architectures use the term **interrupt** to refer to all exceptions.





---
## 1 Common Causes of Exceptions

- Arithmetic errors (overflow, divide-by-zero)
- Illegal or undefined instructions
- Memory protection violations (page fault, segmentation fault)
- I/O device requests
- System calls (intentional, synchronous exceptions)
    



---

## 2 Types of Exceptions

Exceptions are often classified along two axes:

### 1. By Source

- **External (Interrupts):** Generated by hardware outside the CPU
    - Examples: I/O completion, timer expiration

- **Internal (Traps/Faults):** Generated by the currently executing instruction
    - Examples: arithmetic overflow, page fault
        

### 2. By Timing

- **Synchronous:** Caused directly by the execution of an instruction
    - Examples: divide-by-zero, system call
        
- **Asynchronous:** Occur independently of instruction execution
    - Examples: I/O interrupt, clock interrupt
        

---

## Floating-Point Arithmetic (3.5, 4.9)

Floating-point operations introduce specialized exceptions defined by the IEEE 754 standard:

- Overflow
- Underflow
- Divide-by-zero
- Invalid operation
- Inexact result
    

See: [[IEEE Floating Point System]] (separate note not in repository)




---
## 3 Exception Handling Overview

When an exception occurs, the processor typically:

1. **Stops normal instruction execution**
    
2. **Saves processor state** (e.g., PC, status registers)
    
3. **Identifies the cause** of the exception
    
4. **Transfers control** to an exception handler (often in the OS)
    
5. **Handles the exception**
    
6. **Resumes execution** (if possible) or terminates the program




---
## 4 [[Instruction Pipelining]] and Exceptions

In pipelined processors, exceptions are treated as another type of **hazard**.

Key challenge: multiple instructions are in-flight simultaneously, so the processor must ensure correctness when an exception occurs.

### Precise vs. Imprecise Exceptions

#### Precise Exception
> An exception that is:
> 
> - Associated with the _exact_ instruction that caused it
> - All earlier instructions have completed
> - No later instructions have modified architectural state
>     

Precise exceptions make debugging and OS handling simpler and are required by most modern ISAs.

#### Imprecise Exception
> An exception where:
> 
> - The exact faulting instruction may be unclear
>     
> - Later instructions may have partially executed
>     

Imprecise exceptions are more common in aggressively optimized or older pipelined architectures.

---

### Out-of-Order Execution

> A situation in pipelined execution where an instruction blocked from executing does not force subsequent independent instructions to wait.

Out-of-order execution improves performance but complicates exception handling. To maintain **precise exceptions**, processors use techniques such as:

- Reorder buffers (ROB)
- Commit/retirement stages
- Register renaming
    

---

## Terminology

### Vectored Interrupt

> An interrupt where the address of the exception handler is determined by the _cause_ of the exception.

Advantages:
- Faster dispatch to the correct handler
- Reduced software overhead
    

---
### Restartable Instruction

> An instruction that can resume execution after an exception is handled without affecting the final result.

Examples:
- Page faults (instruction restarts after page is loaded)
- Cache misses handled transparently by hardware


---

# References