Opened 12-13-2025 20:32

Status: 

Tags: cs250

Topic: 8

Prev note: [[ðŸ”´ Control and Task Management]] Next note: 

# Control Unit
> The **control unit** generates control signals that direct how the datapath components operate for each instruction.

- Control signals determine:
    - Which ALU operation to perform
    - Whether memory is read or written
    - Whether registers are written
    - How data flows through multiplexers



---
## 1 Main Control Unit
> general manager
> 
> Generates high-level control signals based on the instruction opcode.

- Takes the **opcode** as input

### Signals
- Produces control signals such as:
    - RegWrite
    - MemRead
    - MemWrite
    - MemToReg
    - Branch
    - ALUSrc
    - ALUOp (2-bit signal sent to ALU control)
        
The main control unit does **not** directly control the ALUâ€™s exact operation.

###### Datapath with control: a simple example 4.4.5
![[Screenshot 2025-12-09 225524.png]]
*watch animation 4.4.6

###### Signals
![[Screenshot 2025-12-09 225728.png]]

###### Example: LDUR Instruction Control Signals

|Signal|Value|Explanation|
|---|---|---|
|Branch|0|Not a branch instruction|
|MemRead|1|Reads from data memory|
|MemToReg|1|Memory output written to register|
|ALUSrc|1|ALU computes address using immediate offset|
|RegWrite|1|Result written to register


---
## 2 ALU Control Unit
> calculation powerhouse
> 
> uses bits and different signals to indicate the operations an instruction will perform 

### How ALU Control Works
1. The ALU has **4 control input bits** that specify the exact operation (add, subtract, AND, OR, etc.).
2. The **ALUOp** signal (2 bits) is generated by the main control unit.
3. The **opcode / function field** (11-bit field in LEGv8) refines the operation.
4. The ALU control combines ALUOp + opcode to produce the ALU control inputs


### ALUOp Usage
- **Load / Store**:
    - ALUOp = 00
    - ALU performs **add** to compute memory address
        
- **Compare and Branch on Equal to 0**:
    - ALU performs **pass input B** or subtraction to test for zero
        
- **R-type Instructions**:
    - ALUOp = 10
    - Opcode determines ADD, SUB, AND, OR, etc.





---
# Active Recall
- Chapter 4
	- do questions in 4.4.2 and 4.4.3 to test knowledge on ALUOp
	- walk through 4.4.8

--- 
# References
## Textbook
- Chapter 4
	- 4.4